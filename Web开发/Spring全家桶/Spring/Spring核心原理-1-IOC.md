# Spring核心原理-IOC

## 什么是IOC和DI

IOC（inversion of control）意思是反转控制，什么是反转控制，常见说法是把`对象的创建都交给IOC`了，程序员从我们平常代码中大量的NEW代码解脱出来。

用了IOC之后就伴随着DI（depend injection）意思是依赖注入，什么是依赖注入呢，就是Spring会把我们需要用到的依赖打包准备好，我们开箱即用。

## 如何实现自己的IOC

目标：把用户需要用到的对象实例化封装到一个容器中，提供容器公共的访问方法供开发人员使用

步骤：

1. 创建自定义的注解（带有我们自定义注解的类才进行对象的实例化和装配）；
2. 需用读取用户配置文件（用户可自定义那些包需要进行扫描bean的装配）；
3. 扫描文件进行类加载（根据用户的配置扫描对应的包加载对应包里面的calss放到一个容器里）；
4. 把扫描出来的class中带有自定义注解的类和属性分别进行实例化和属性注入；
5. 把实例化好的对象放到一个容器里并提供调用方法；

根据以上思路，我们整理出来需要使用的技术有注解相关技术、配置文件加载技术、类加载技术、反射技术。

## 简单实现一个IOC

### 前期准备

1. 新建application.properties配置ioc.bean.scan属性，制定扫描那个文件目录下的类
2. 定义MyComponent注解，标注哪些类需要进行IOC管理
3. 定义MyAutowrite注解，标注哪些属性进行依赖注入
4. 读取Properties文件（读取ioc.bean.scan的值）、类名首字母转小写工具方法（bean的名称）

